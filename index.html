<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes" />
<title>Szkeletal: Ziemniaczkowy GÅ‚Ã³d Estrogenowego Drakula v0.93</title> 
<link rel="stylesheet" href="style.css">
<style>
  .dev-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 15px;
  }
  .dev-grid button {
    padding: 8px 4px;
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>
</head>
<body>
  <div id="splashOverlay">
    <img id="splashImage" src="img/splash_dev.png" alt="Ekran powitalny Szkeletal">
  </div>

  <div id="gameContainer">
    <div id="title">Szkeletal</div>
    
    <div id="playerHPBarOuter">
      <div id="playerHPBarInner"></div>
      <div id="playerHPBarTxt"></div>
    </div>
    <div id="xpBarOuter">
      <div id="xpBarFill"></div>
      <div id="xpBarTxt"></div>
    </div>
    
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <div id="bonusPanel"></div>
    
    <div id="gameInfo">
      <div class="stat">
        <span class="stat-icon"><img src="img/icons/hud_score.png" class="stat-icon-img" alt="Score"></span>
        <span id="score">0</span>
        <div class="stat-progress" id="scoreProgress" style="width:0%;"></div>
      </div>
      <div class="stat">
        <span class="stat-icon"><img src="img/icons/hud_level.png" class="stat-icon-img" alt="Lvl"></span>
        <span id="level">1</span>
        <div class="stat-progress" id="levelProgress" style="width:0%;"></div>
      </div>
      <div class="stat">
        <span class="stat-icon"><img src="img/icons/hud_xp.png" class="stat-icon-img" alt="XP"></span>
        <span id="xp">0</span>/<span id="xpNeeded">5</span>
        <div class="stat-progress" id="xpProgress" style="width:0%;"></div>
      </div>
      <div class="stat">
        <span class="stat-icon"><img src="img/icons/hud_health.png" class="stat-icon-img" alt="HP"></span>
        <span id="health">100</span>
        <div class="stat-progress" id="healthProgress" style="width:100%;"></div>
      </div>
      <div class="stat" id="enemyStat">
        <span class="stat-icon"><img src="img/icons/hud_enemies.png" class="stat-icon-img" alt="Enemies"></span>
        <span id="enemyCount">0</span>/<span id="enemyLimit">0</span>
        <div class="stat-progress" id="enemyProgress" style="width:0%;"></div>
      </div>
      <div class="stat">
        <span class="stat-icon"><img src="img/icons/hud_time.png" class="stat-icon-img" alt="Time"></span>
        <span id="time">0</span>
        <div class="stat-progress" id="timeProgress" style="width:0%;"></div>
      </div>
    </div>
    
    <div id="instructions">âŒ¨ï¸ Sterowanie: WASD/strzaÅ‚ki lub ğŸ•¹ï¸ wirtualny joystick | ğŸ“Š Zbieraj XP, wybieraj perki | ğŸ‘‘ Pokonuj elity i otwieraj skrzynie | â¸ï¸ ESC - pauza</div>

    <div id="menuOverlay" class="overlay" style="display:flex;">
      <div class="panel">
        <img id="menuLogo" src="img/logo.png" alt="Szkeletal Logo">
        
        <div class="tabs">
          <button class="tab active" id="tabBtnGame">Gra</button>
          <button class="tab" id="tabBtnConfig">Konfiguracja</button>
          <button class="tab btn-danger" id="tabBtnDev">ğŸ› ï¸ Dev Menu</button>
          <button class="tab btn-secondary" id="tabBtnGuide">Przewodnik</button>
        </div>

        <div id="tab-game" class="tab-content active">
          <p style="margin-bottom:15px;" id="menuNewGamePrompt">Witaj w grze...</p>
          <button id="btnStart" class="btn" type="button" style="width:100%; font-size:18px; padding:15px;">â–¶ï¸ Zacznij nowÄ… grÄ™</button>
          <button id="btnContinue" class="btn btn-warning" type="button" style="width:100%; font-size:18px; padding:15px; display:none; margin-top:10px;">â¯ï¸ Kontynuuj GrÄ™</button>
          <button id="btnReplayIntro" class="btn btn-secondary" type="button" onclick="wrappedDisplayIntro()" style="width:100%; font-size:14px; padding:10px; margin-top:10px;">ğŸ¥ WÅ‚Ä…cz Intro</button>
        
          <div class="scores-container" style="margin-top:20px;">
            <button class="btn btn-danger btn-clear-scores" type="button" id="btnClearScoresMenu">ğŸ—‘ï¸ WyczyÅ›Ä‡</button>
            <div id="scoresTable">
              <h4 id="scoresTitleMenu">ğŸ† Tablica wynikÃ³w</h4>
              <table>
                <thead>
                  <tr>
                    <th id="scoresRankMenu">#ï¸âƒ£</th>
                    <th id="scoresScoreMenu"><img src="img/icons/hud_score.png" class="bar-icon"> Wynik</th>
                    <th id="scoresLevelMenu"><img src="img/icons/hud_level.png" class="bar-icon"> Poziom</th>
                    <th id="scoresTimeMenu"><img src="img/icons/hud_time.png" class="bar-icon"> Czas</th>
                  </tr>
                </thead>
                <tbody id="scoresBodyMenu"></tbody>
              </table>
            </div>
          </div>
        </div>

        <div id="tab-config" class="tab-content">
          <h4 style="margin-top:0;" id="configTitleGame">Ustawienia Rozgrywki</h4>
          <div class="row" style="margin-bottom:12px;">
            <div style="width:100%;" id="configJoystickTitle">Pozycja joysticka:</div>
            <label class="option"><input type="radio" name="joypos" value="left"> <span id="configJoyLeft">Lewa</span></label>
            <label class="option"><input type="radio" name="joypos" value="right" checked> <span id="configJoyRight">Prawa</span></label>
            <label class="option"><input type="radio" name="joypos" value="off"> <span id="configJoyOff">WyÅ‚Ä…czony</span></label>
          </div>
          <div class="row" style="margin-bottom:12px;">
            <label class="option"><input type="checkbox" id="chkHyper"> <span id="configHyper">âš¡ Hyper Mode (+20% tempo gry)</span></label>
          </div>
          <div class="row" style="margin-bottom:12px;">
            <label class="option"><input type="checkbox" id="chkShake" checked> <span id="configShake">ğŸ“³ DrÅ¼enie ekranu</span></label>
          </div>
          
          <h4 style="margin-top:16px;" id="configTitleVisual">Ustawienia Wizualne i Debugowanie</h4>
          <div class="row" style="margin-bottom:12px;">
            <label class="option"><input type="checkbox" id="chkFPS" checked> <span id="configFPS">ğŸ“Š PokaÅ¼ licznik FPS</span></label>
          </div>
          
          <div class="row" style="margin-bottom:12px;">
            <div style="width:100%;" id="configFpsPosTitle">Pozycja licznika FPS:</div>
            <label class="option"><input type="radio" name="fpspos" value="left"> <span id="configFpsPosLeft">Lewa</span></label>
            <label class="option"><input type="radio" name="fpspos" value="right" checked> <span id="configFpsPosRight">Prawa</span></label>
          </div>
          
          <div class="row" style="margin-bottom:12px;">
            <label class="option"><input type="checkbox" id="chkPickupLabels" checked> <span id="configLabels">ğŸ·ï¸ Pokazuj podpisy pickupÃ³w</span></label>
          </div>
          <div class="row" style="margin-bottom:12px;">
            <div style="width:100%;" id="configStyleTitle">Styl pickupÃ³w:</div>
            <label class="option"><input type="radio" name="pickupstyle" value="circle"> <span id="configStyleCircle">ğŸ”µ Kolorowe kÃ³Å‚ka</span></label>
            <label class="option"><input type="radio" name="pickupstyle" value="emoji" checked> <span id="configStyleEmoji">ğŸ˜€ Emoji</span></label>
          </div>

          <h4 style="margin-top:16px;" id="configTitleLang">JÄ™zyk</h4>
          <div class="row" style="margin-bottom:12px;" id="lang-selector-container">
            </div>
        </div>

        <div id="tab-dev" class="tab-content">
          <p style="color:#f44336; margin-bottom:15px; font-size: 13px;"><strong>âš ï¸ Uwaga:</strong> To menu sÅ‚uÅ¼y do testÃ³w. MoÅ¼e zepsuÄ‡ balans.</p>
          
          <div class="dev-section">
            <h4>ğŸ§ª Szybkie Testy Jednostek (v0.93)</h4>
            <p style="font-size:12px; margin-bottom:5px;">Kliknij, aby zresetowaÄ‡ grÄ™ i spawnowaÄ‡ TYLKO ten typ:</p>
            <div class="dev-grid">
                <button class="btn btn-warning" onclick="devPresetEnemy('standard')">DadGamer</button>
                <button class="btn btn-warning" onclick="devPresetEnemy('horde')">Horda</button>
                <button class="btn btn-warning" onclick="devPresetEnemy('ranged')">Menel</button>
                
                <button class="btn btn-warning" onclick="devPresetEnemy('tank')">Szkielet</button>
                <button class="btn btn-warning" onclick="devPresetEnemy('splitter')">Wykop</button>
                <button class="btn btn-warning" onclick="devPresetEnemy('kamikaze')">Troll</button>
                
                <button class="btn btn-warning" onclick="devPresetEnemy('aggressive')">Prowokator</button>
                <button class="btn btn-warning" onclick="devPresetEnemy('wall')">OblÄ™Å¼nik</button>
                <button class="btn btn-danger" onclick="devPresetEnemy('elite')">ELITA (BOSS)</button>
            </div>
          </div>

          <div class="dev-section">
            <h4>ğŸ® Stan Gracza</h4>
            <div class="dev-control">
              <label>Poziom gracza:</label>
              <input type="number" id="devLevel" min="1" max="100" value="1">
            </div>
            <div class="dev-control">
              <label>Å»ycie (HP):</label>
              <input type="number" id="devHealth" min="1" max="9999" value="100">
            </div>
            <div class="dev-control">
              <label>Max HP:</label>
              <input type="number" id="devMaxHealth" min="1" max="9999" value="100">
            </div>
            <div class="dev-control">
              <label>XP:</label>
              <input type="number" id="devXP" min="0" max="9999" value="0">
            </div>
            <div class="dev-control">
              <label>Czas Gry (s):</label>
              <input type="number" id="devTime" min="0" max="999" value="0">
            </div>
            <div class="dev-control">
              <label>NieÅ›miertelnoÅ›Ä‡:</label>
              <input type="checkbox" id="devGodMode">
            </div>
          </div>
          
          <div class="dev-section">
            <h4>âš”ï¸ BroÅ„ i Perki</h4>
            <div class="dev-control">
              <label><img src="img/icons/whip.jpg" class="bar-icon"> Bicz poziom:</label>
              <input type="number" id="devWhip" min="1" max="5" value="1">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/autogun.png" class="bar-icon"> AutoGun poziom:</label>
              <input type="number" id="devAutoGun" min="0" max="1" value="0">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/damage.png" class="bar-icon"> ObraÅ¼enia:</label>
              <input type="number" id="devDamage" min="1" max="999" value="1">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/firerate.png" class="bar-icon"> SzybkostrzelnoÅ›Ä‡:</label>
              <input type="number" id="devFireRate" min="50" max="5000" value="650">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/multishot.png" class="bar-icon"> Multishot:</label>
              <input type="number" id="devMultishot" min="0" max="10" value="0">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/pierce.png" class="bar-icon"> Pierce:</label>
              <input type="number" id="devPierce" min="0" max="10" value="0">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/orbital.jpg" class="bar-icon"> Orbital poziom:</label>
              <input type="number" id="devOrbital" min="0" max="5" value="0">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/nova.png" class="bar-icon"> Nova poziom:</label>
              <input type="number" id="devNova" min="0" max="5" value="0">
            </div>
            <div class="dev-control">
              <label><img src="img/icons/lightning.png" class="bar-icon"> Piorun poziom:</label>
              <input type="number" id="devLightning" min="0" max="6" value="0">
            </div>
          </div>
          
          <div class="dev-section">
            <h4>ğŸ‘¾ Spawning PrzeciwnikÃ³w</h4>
            <div class="dev-control">
              <label>Dozwoleni wrogowie:</label>
              <select id="devEnemyType" multiple style="height:120px;">
                <option value="all" selected>Wszyscy</option>
                <option value="standard">Standard</option>
                <option value="horde">Horda</option>
                <option value="aggressive">Agresywni</option>
                <option value="kamikaze">Kamikaze</option>
                <option value="splitter">Splitter</option>
                <option value="tank">Tank</option>
                <option value="ranged">Ranged</option>
                <option value="wall">OblÄ™Å¼nik (Wall)</option>
                <option value="elite">Elite</option>
              </select>
            </div>
            <div class="dev-control">
              <label>Spawn rate:</label>
              <input type="number" id="devSpawnRate" min="0" max="1" step="0.01" value="0.008">
            </div>
            <div class="dev-control">
              <label>Max wrogÃ³w:</label>
              <input type="number" id="devMaxEnemies" min="0" max="500" value="300">
            </div>
          </div>
          
          <div class="dev-section">
            <h4>ğŸ’ Pickupy</h4>
            <div class="dev-control">
              <label>Dropowane pickupy:</label>
              <select id="devPickupType" multiple style="height:100px;">
                <option value="all" selected>Wszystkie</option>
                <option value="heal">Leczenie</option>
                <option value="magnet">Magnes</option>
                <option value="shield">Tarcza</option>
                <option value="speed">SzybkoÅ›Ä‡</option>
                <option value="bomb">Bomba</option>
                <option value="freeze">ZamroÅ¼enie</option>
              </select>
            </div>
            <div class="dev-control">
              <label>Spawn natychmiast:</label>
              <button class="btn" onclick="devSpawnPickup('heal')">â¤ï¸ HP</button>
              <button class="btn" onclick="devSpawnPickup('bomb')">ğŸ’£ Bomba</button>
              <button class="btn" onclick="devSpawnPickup('magnet')">ğŸ§² Magnes</button>
            </div>
          </div>
          
          <div class="dev-section">
            <h4>ğŸš€ Scenariusze Testowe</h4>
            <div class="dev-control" style="justify-content: space-around;">
              <button class="btn btn-secondary" onclick="devPresetMinimalWeapons()">Test: Min Bronie / Max Czas</button>
              <button class="btn btn-warning" onclick="devPresetAlmostMax()">Test: Prawie Max</button>
              <button class="btn btn-danger" onclick="devPresetMax()">Test: Max Staty</button>
            </div>
          </div>
          
          <button class="btn" onclick="applyDevSettings()" style="width:100%; margin-top:10px;">âœ… Zastosuj Ustawienia Dev</button>
        </div>

        <div id="tab-guide" class="tab-content">
          <div id="guideContent"></div> </div>
      </div>
    </div>

    <div id="introOverlay" class="overlay">
      <div class="panel intro-panel">
        <div class="intro-image-container">
          <img id="introImage" class="intro-image" src="" alt="Obraz intro">
        </div>
        <div class="row intro-controls">
          <button id="btnIntroPrev" class="btn btn-secondary" style="display: none;">Wstecz</button>
          <button id="btnIntroSkip" class="btn btn-danger">PomiÅ„ (Zamknij)</button>
          <button id="btnIntroNext" class="btn">Dalej</button>
        </div>
      </div>
    </div>
    <div id="levelUpOverlay" class="overlay">
      <div id="levelUpPanel" class="panel">
        <h3 id="levelUpTitle">Wybierz ulepszenie</h3>
        <div id="perks"></div>
        <button id="btnContinueMaxLevel" class="btn btn-warning" type="button" style="width:100%; font-size:16px; padding:12px; display:none; margin-top:10px;">
          Wszystkie perki wymaksowane! Kontynuuj...
        </button>
        <div style="margin-top:16px;">
          <h4 style="margin:0 0 10px 0;" id="levelUpStatsTitle">ğŸ“Š Aktualne statystyki</h4>
          <div id="statsDisplay"></div>
        </div>
      </div>
    </div>

    <div id="pauseOverlay" class="overlay">
      <div class="panel" style="text-align:center;">
        <h3 id="pauseTitle">â¸ï¸ Pauza</h3>
        <p style="font-size:16px; margin:20px 0;" id="pauseText">Gra wstrzymana</p>
        <div class="row" style="justify-content:center;">
          <button id="btnResume" class="btn" type="button">WznÃ³w</button>
          <button id="btnPauseMenu" class="btn btn-secondary" type="button">Menu gÅ‚Ã³wne</button>
        </div>
        <div style="margin-top:16px;">
          <h4 style="margin:15px 0 10px 0;" id="pauseStatsTitle">ğŸ“Š Aktualne statystyki</h4>
          <div id="statsDisplayPause"></div>
        </div>
      </div>
    </div>

    <div id="resumeOverlay" class="overlay">
      <div class="panel">
        <h3 id="resumeTitle">Wznawianie gry</h3>
        <div id="resumeText">Wznawianie za: 1.50 s</div>
      </div>
    </div>

    <div id="chestOverlay" class="overlay">
      <div class="panel" style="text-align:center;">
        <h3 id="chestTitle">ğŸ OtwÃ³rz skrzyniÄ™</h3>
        <div id="chestRewardDisplay" class="chest-reward"></div>
        <button id="chestButton" class="btn" type="button">OtwÃ³rz i odbierz</button>
      </div>
    </div>

    <div id="gameOverOverlay" class="overlay">
      <div class="panel" style="text-align:center;">
        <h3 id="gameOverTitle">ğŸ’€ GAME OVER</h3>
        <div style="margin:20px 0; font-size:18px;">
          <p style="margin:8px 0;"><strong id="gameOverScoreLabel"><img src="img/icons/hud_score.png" class="bar-icon"> Wynik:</strong> <span id="finalScore">0</span> punktÃ³w</p>
          <p style="margin:8px 0;"><strong id="gameOverLevelLabel"><img src="img/icons/hud_level.png" class="bar-icon"> Poziom:</strong> <span id="finalLevel">1</span></p>
          <p style="margin:8px 0;"><strong id="gameOverTimeLabel"><img src="img/icons/hud_time.png" class="bar-icon"> Czas:</strong> <span id="finalTime">0</span></p>
        </div>
        <div class="scores-container">
          <button class="btn btn-danger btn-clear-scores" type="button" id="btnClearScoresGO">ğŸ—‘ï¸ WyczyÅ›Ä‡</button>
          <div id="scoresTable">
            <h4 id="scoresTitleGO">ğŸ† Tablica wynikÃ³w</h4>
            <table>
              <thead>
                <tr>
                  <th id="scoresRankGO">#ï¸âƒ£</th>
                  <th id="scoresScoreGO"><img src="img/icons/hud_score.png" class="bar-icon"> Wynik</th>
                  <th id="scoresLevelGO"><img src="img/icons/hud_level.png" class="bar-icon"> Poziom</th>
                  <th id="scoresTimeGO"><img src="img/icons/hud_time.png" class="bar-icon"> Czas</th>
                </tr>
              </thead>
              <tbody id="scoresBodyGameOver"></tbody>
            </table>
          </div>
        </div>
        <div class="row" style="justify-content:center; gap:12px; margin-top:20px;">
          <button id="btnRetry" class="btn" type="button">Zagraj ponownie</button>
          <button id="btnMenu" class="btn btn-secondary" type="button">Menu</button>
        </div>
      </div>
    </div>

    <div id="confirmOverlay" class="overlay">
      <div class="panel" style="text-align:center; max-width: 450px;">
        <h3 id="confirmTitle">Potwierdzenie</h3>
        <p id="confirmText" style="font-size:16px; margin:20px 0; line-height: 1.5;">
          Czy na pewno chcesz wyzerowaÄ‡ tablicÄ™ wynikÃ³w? Tej operacji nie moÅ¼na cofnÄ…Ä‡.
        </p>
        <div class="row" style="justify-content:center;">
          <button id="btnConfirmYes" class="btn btn-danger" type="button">Tak, wyczyÅ›Ä‡</button>
          <button id="btnConfirmNo" class="btn btn-secondary" type="button">Anuluj</button>
        </div>
      </div>
    </div>

    <div id="joystickZone">
      <div id="joystickBase"></div>
      <div id="joystick"></div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>